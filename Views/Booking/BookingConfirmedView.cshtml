@model RescueBus.Models.Booking
@{
    ViewBag.Title = "Booking Confirmed";
}

@Styles.Render("~/Content/MyStyles.css")
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-5 w-75 align-content-center" style="background-color:paleturquoise;">

    <div class="text-center mb-4">
        <img src="~/Content/Images/Confirmed.png" width="100" height="100" alt="Confirmed" />
        <h2 class="text-secondary mt-3">Booking Confirmed</h2>
    </div>


    <div class="card shadow-sm mb-4 rounded-4">
        <div class="card-header bg-primary text-white text-center rounded-top-4">
            <strong>Booking Details</strong>
        </div>
        <div class="card-body">
            <p><strong>Booking ID:</strong> @Model.BookingID</p>
            <p><strong>Date Booked:</strong> @Model.bookingDate.ToString("dd/MM/yyyy")</p>
            <p><strong>Pick-Up Time:</strong> @Model.PickUpTime.ToString("HH:mm")</p>
            <p><strong>Pick-Up Address:</strong> @Model.Address</p>
        </div>
    </div>


    <div class="card shadow-sm mb-4 rounded-4">
        <div class="card-header bg-secondary text-white text-center rounded-top-4">
            <strong>Driver Details</strong>
        </div>
        <div class="card-body d-flex align-items-center">
            <img src="~/Content/Images/Person.png" width="80" height="80" class="rounded-circle me-4" alt="Driver" />
            <div>
                <p><strong>Driver Name:</strong> @Model.Driver</p>
                <p><strong>Phone Number:</strong> @Model.Phone</p>
            </div>
        </div>
    </div>


    <div class="card shadow-sm rounded-4">
        <div class="card-header bg-dark text-white text-center rounded-top-4">
            <strong>Ambulance Details</strong>
        </div>
        <div class="card-body d-flex align-items-center">
            <img src="~/Content/Images/Ambulance.png" width="80" height="80" class="me-4" alt="Ambulance" />
            <div>
                <p><strong>Ambulance Type:</strong> @Model.servicetype</p>
                <p><strong>Registration Number:</strong> @Model.Vehicle</p>
            </div>
        </div>
    </div>
</div>


<script>
    const booking = {
        BookingID: "@Model.BookingID",
        FullName: "@Model.FullName",
        Phone: "@Model.Phone",
        PickUpTime: "@Model.PickUpTime",
        Reason: "@Model.Reason",
        Vehicle: "@Model.Vehicle",
        Driver: "@Model.Driver",
        Address: "@Model.Address",
        BookingDate: "@Model.bookingDate",
        ServiceType: "@Model.servicetype"
    };

    localStorage.setItem("lastBooking", JSON.stringify(booking));
    localStorage.setItem(booking.BookingID, JSON.stringify(booking));
    let history = JSON.parse(localStorage.getItem("rideHistory")) || [];
    if (!history.includes(booking.BookingID)) {
        history.push(booking.BookingID);
        localStorage.setItem("rideHistory", JSON.stringify(history));
    }
</script>
