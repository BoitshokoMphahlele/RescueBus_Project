@model RescueBus.Models.Booking
@{
    ViewBag.Title = "Booking Confirmed";
}

@Styles.Render("~/Content/MyStyles.css")
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div id="bookingContainer" class="container mt-5 w-75 align-content-center" style="background-color:paleturquoise; display:none;">
    <div class="text-center mb-4">
        <img src="~/Content/Images/Confirmed.png" width="100" height="100" alt="Confirmed" />
        <h2 class="text-secondary mt-3">Booking Confirmed</h2>
    </div>

    <div class="card shadow-sm mb-4 rounded-4">
        <div class="card-header bg-primary text-white text-center rounded-top-4">
            <strong>Booking Details</strong>
        </div>
        <div class="card-body" id="bookingDetails">
            <!-- Booking details inserted via JS -->
        </div>
    </div>

    <div class="card shadow-sm mb-4 rounded-4">
        <div class="card-header bg-secondary text-white text-center rounded-top-4">
            <strong>Driver Details</strong>
        </div>
        <div class="card-body d-flex align-items-center">
            <img src="~/Content/Images/Person.png" width="80" height="80" class="rounded-circle me-4" alt="Driver" />
            <div id="driverDetails">
                <!-- Driver details inserted via JS -->
            </div>
        </div>
    </div>

    <div class="card shadow-sm rounded-4">
        <div class="card-header bg-dark text-white text-center rounded-top-4">
            <strong>Ambulance Details</strong>
        </div>
        <div class="card-body d-flex align-items-center">
            <img src="~/Content/Images/Ambulance.png" width="80" height="80" class="me-4" alt="Ambulance" />
            <div id="ambulanceDetails">
                <!-- Ambulance details inserted via JS -->
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
        const bookingId = localStorage.getItem("selectedBookingId");
        if (!bookingId) {
            $("#bookingContainer").html("<p>No booking selected.</p>").show();
            return;
        }

        const bookingData = localStorage.getItem(bookingId);
        if (!bookingData) {
            $("#bookingContainer").html("<p>Booking data not found.</p>").show();
            return;
        }

        const booking = JSON.parse(bookingData);

        $("#bookingDetails").html(`
            <p><strong>Booking ID:</strong> ${booking.BookingID}</p>
            <p><strong>Date Booked:</strong> ${new Date(booking.BookingDate).toLocaleDateString()}</p>
            <p><strong>Pick-Up Time:</strong> ${booking.PickUpTime}</p>
            <p><strong>Pick-Up Address:</strong> ${booking.Address}</p>
        `);

        $("#driverDetails").html(`
            <p><strong>Driver Name:</strong> ${booking.Driver}</p>
            <p><strong>Phone Number:</strong> ${booking.Phone}</p>
        `);

        $("#ambulanceDetails").html(`
            <p><strong>Ambulance Type:</strong> ${booking.ServiceType}</p>
            <p><strong>Registration Number:</strong> ${booking.Vehicle}</p>
        `);

        $("#bookingContainer").show();
    });
</script>
